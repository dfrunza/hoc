proc sqrt_iter(var x, var g)
{
  var r = x/g;
  if(r != g)
  {
    r = (r+g)/2;
    if(abs(r-g) == 1)
      r = min(r, g);
  }
  return r;
}

/*
   Computes the largest number 'r' such that 'r*r <= x'
 */
proc sqrt_floor(var x)
{
  var g = x;
  var r = 1;
  while(g && (g != r))
  {
    g = r;
    r = sqrt_iter(x, g);
  }
  return g;
}
